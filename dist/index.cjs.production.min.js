"use strict";var e;Object.defineProperty(exports,"__esModule",{value:!0}),exports.EnumKinds=void 0,(e=exports.EnumKinds||(exports.EnumKinds={})).DiffEdit="E",e.DiffNew="N",e.DiffDeleted="D",e.DiffArray="A";const t=["N","E","A","D"];class n{constructor(e,t){this.kind=e,null!=t&&t.length&&(this.path=t)}}class r extends n{constructor(e,t,n){super("E",e),this.lhs=t,this.rhs=n}}class s extends n{constructor(e,t){super("N",e),this.rhs=t}}class i extends n{constructor(e,t){super("D",e),this.lhs=t}}class o extends n{constructor(e,t,n){super("A",e),this.index=t,this.item=n}}function a(e,t){return e.splice(t,1)}function h(e){const t=typeof e;return"object"!==t?t:e===Math?"math":null===e?"null":Array.isArray(e)?"array":"[object Date]"===Object.prototype.toString.call(e)?"date":"function"==typeof e.toString&&/^\/.*\//.test(e.toString())?"regexp":"object"}function c(e){let t=0;if(0===e.length)return t;for(let n=0;n<e.length;n++)t=(t<<5)-t+e.charCodeAt(n),t&=t;return t}function f(e){let t=0;const n=h(e);if("array"===n){e.forEach((function(e){t+=f(e)}));const r=l(n,{hash:t});return t+c(r)}if("object"===n){for(const r in e)if(e.hasOwnProperty(r)){const s=l(n,{key:r,hash:f(e[r])});t+=c(s)}return t}const r=l(n,{value:e});return t+c(r)}function l(e,t){switch(e){case"array":return`[ type: ${e} , hash: ${t.hash}]`;case"object":return`[ type: ${e}, key: ${t.key} , hash: ${t.hash}]`;default:return`[ type: ${e} , value: ${t.value}]`}}function p(e,t,n,a,c,l,u,d){n=n||[],u=u||[];const g=(c=c||[]).slice(0);if(null!=l){if(a){if("function"==typeof a&&a(g,l))return;if("object"==typeof a){if(a.prefilter&&a.prefilter(g,l))return;if(a.normalize){var x=a.normalize(g,l,e,t);x&&(e=x[0],t=x[1])}}}g.push(l)}"regexp"===h(e)&&"regexp"===h(t)&&(e=e.toString(),t=t.toString());const b=typeof e,y=typeof t;let D,k,v,w;const m="undefined"!==b||u&&u.length>0&&u[u.length-1].lhs&&Object.getOwnPropertyDescriptor(u[u.length-1].lhs,l),A="undefined"!==y||u&&u.length>0&&u[u.length-1].rhs&&Object.getOwnPropertyDescriptor(u[u.length-1].rhs,l);if(!m&&A)n.push(new s(g,t));else if(!A&&m)n.push(new i(g,e));else if(h(e)!==h(t))n.push(new r(g,e,t));else if("date"===h(e)&&e-t!=0)n.push(new r(g,e,t));else if("object"===b&&null!==e&&null!==t){for(D=u.length-1;D>-1;--D)if(u[D].lhs===e){w=!0;break}if(w)e!==t&&n.push(new r(g,e,t));else{if(u.push({lhs:e,rhs:t}),Array.isArray(e)){for(d&&(e.sort((function(e,t){return f(e)-f(t)})),t.sort((function(e,t){return f(e)-f(t)}))),D=t.length-1,k=e.length-1;D>k;)n.push(new o(g,D,new s(void 0,t[D--])));for(;k>D;)n.push(new o(g,k,new i(void 0,e[k--])));for(;D>=0;--D)p(e[D],t[D],n,a,g,D,u,d)}else{var E=Object.keys(e).concat(Object.getOwnPropertySymbols(e)),N=Object.keys(t).concat(Object.getOwnPropertySymbols(t));for(D=0;D<E.length;++D)v=E[D],w=N.indexOf(v),w>=0?(p(e[v],t[v],n,a,g,v,u,d),N[w]=null):p(e[v],void 0,n,a,g,v,u,d);for(D=0;D<N.length;++D)v=N[D],v&&p(void 0,t[v],n,a,g,v,u,d)}u.length=u.length-1}}else e!==t&&("number"===b&&isNaN(e)&&isNaN(t)||n.push(new r(g,e,t)))}function u(e,t,n,r,s){const i=[];if(p(e,t,i,r,null,null,null,s),n)for(let e=0;e<i.length;++e)n(i[e]);return i}function d(e,t,n,r){const s=u(e,t,r?function(e){e&&r.push(e)}:void 0,n);return r||(s.length?s:void 0)}function g(e,t,n){var r;if(null!=(r=n.path)&&r.length){let[r,s]=function(e,t){const n=(t=t.slice()).pop();let r=e;return t.reduce(((e,t)=>r=e[t]),r),[r,n]}(e[t],n.path);switch(n.kind){case"A":g(r[s],n.index,n.item);break;case"D":delete r[s];break;case"E":case"N":r[s]=n.rhs}}else switch(n.kind){case"A":g(e[t],n.index,n.item);break;case"D":e=a(e,t);break;case"E":case"N":e[t]=n.rhs}return e}function x(e){return null!=e&&e&&t.includes(e.kind)}function b(e,t,n){if(void 0===n&&x(t)&&(n=t),e&&n&&n.kind){let t=e,r=-1,s=n.path?n.path.length-1:0;for(;++r<s;)void 0===t[n.path[r]]&&(t[n.path[r]]=void 0!==n.path[r+1]&&"number"==typeof n.path[r+1]?[]:{}),t=t[n.path[r]];switch(n.kind){case"A":n.path&&void 0===t[n.path[r]]&&(t[n.path[r]]=[]),g(n.path?t[n.path[r]]:t,n.index,n.item);break;case"D":delete t[n.path[r]];break;case"E":case"N":t[n.path[r]]=n.rhs}}}function y(e,t,n){if(n.path&&n.path.length){let r,s=e[t],i=n.path.length-1;for(r=0;r<i;r++)s=s[n.path[r]];switch(n.kind){case"A":y(s[n.path[r]],n.index,n.item);break;case"D":case"E":s[n.path[r]]=n.lhs;break;case"N":delete s[n.path[r]]}}else switch(n.kind){case"A":y(e[t],n.index,n.item);break;case"D":case"E":e[t]=n.lhs;break;case"N":e=a(e,t)}return e}function D(e,t,n){if(e&&t&&null!=n&&n.kind){let t,r,s=e;for(r=n.path.length-1,t=0;t<r;t++)void 0===s[n.path[t]]&&(s[n.path[t]]={}),s=s[n.path[t]];switch(n.kind){case"A":y(s[n.path[t]],n.index,n.item);break;case"D":case"E":s[n.path[t]]=n.lhs;break;case"N":delete s[n.path[t]]}}}function k(e,t,n){return t.forEach((t=>{n(e,!0,t)})),!0}exports.Diff=n,exports.DiffArray=o,exports.DiffDeleted=i,exports.DiffEdit=r,exports.DiffNew=s,exports.applyChange=b,exports.applyDiff=function(e,t,n){return e&&t&&u(e,t,(function(r){n&&!n(e,t,r)||b(e,t,r)})),e},exports.applyDiffChange=function(e,t){if(k(e,t,b))return e},exports.deepDiff=d,exports.default=d,exports.diff=d,exports.getOrderIndependentHash=f,exports.isIDiffNode=x,exports.observableDiff=u,exports.orderIndependentDiff=function(e,t,n,r){const s=u(e,t,r?function(e){e&&r.push(e)}:void 0,n,!0);return r||(s.length?s:void 0)},exports.orderIndependentObservableDiff=function(e,t,n,r,s,i,o){return p(e,t,n,r,s,i,o,!0)},exports.revertChange=D,exports.revertDiffChange=function(e,t){if(k(e,t,D))return e};
//# sourceMappingURL=index.cjs.production.min.js.map
